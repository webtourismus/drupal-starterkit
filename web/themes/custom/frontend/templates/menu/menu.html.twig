{# @see "@system/templates/menu.html.twig" #}

{% macro menu_links(items, attributes, menu_level) %}
  {% import _self as menus %}
  {% if items %}
    {% set ul_attributes = create_attribute(attributes.toArray()) %}
    <ul {{ ul_attributes }}>
    {% for item in items %}
      {% set li_attributes = create_attribute(item.attributes.toArray()) %}
      <li {{ li_attributes }}>
        {% set a_attributes = create_attribute(item.url.getOption('attributes') ?? []) %}
        {{ link(item.title, item.url, a_attributes) }}
        {% if item.below %}
          {{ menus.menu_links(item.below, attributes, menu_level + 1) }}
        {% endif %}
      </li>
    {% endfor %}
    </ul>
  {% endif %}
{% endmacro %}

{% import _self as menus %}

{{ menus.menu_links(items, attributes, 0) }}
